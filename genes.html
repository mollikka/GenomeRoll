<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Breeding Simulator 2016</title>
  <script src="genome.js"></script>
</head>
<body>
  <h1>GENOME VALIDATOR</h1>
  <form>
    <h2>Genome (color)</h2>
      <input type=text id="genes_input_color">
      <h3>Recognized genes</h3>
      <ul id="genes_output_color"></ul>
  </form>
  <form>
    <h2>Genome (other)</h2>
      <input type=text id="genes_input_other">
      <h3>Recognized genes</h3>
      <ul id="genes_output_other"></ul>
  </form>
  <script>

  function setup_validator(json_url, genome_name, input_elem, output_list) {

    var request = new XMLHttpRequest();
    request.onreadystatechange = function() {
      if (request.readyState == 4 && request.status == 200) {
        var parsed_json = JSON.parse(request.responseText);
        var re_genes = get_genome_template(parsed_json, genome_name);
        input_elem.oninput = function() {
          var genome = str_to_genome(this.value, re_genes);
          display_genome(genome, output_list, re_genes);
        }
      }
    };
    request.open("GET",json_url, true);
    request.send();
  }

  setup_validator("fantasydog.json", "color", genes_input_color, genes_output_color);


  setup_validator("fantasydog.json", "other", genes_input_other, genes_output_other);




  </script>
</body>
</html>
