<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Breeding Simulator 2016</title>
  <script src="traits.js"></script>
  <script src="special.js"></script>
</head>
<body>
  <h1>SPECIAL OPTIONS</h1>
    <h2>Options</h2>
    <form id="special_options_input">
    </form>
    <h2>Paternal traits</h2>
    <div id="papa_traits_list">
    </div>
    <h2>Maternal traits</h2>
    <div id="mama_traits_list">
    </div>
    <h2>Active effects</h2>
    <div id="effects_display">
    </div>

  <script>

  var request = new XMLHttpRequest();
  var checkboxes = [];
  request.onreadystatechange = function() {
    if (request.readyState == 4 && request.status == 200) {
      var parsed_json = JSON.parse(request.responseText);
      setup_traitform(parsed_json, papa_traits_list, true);
      setup_traitform(parsed_json, mama_traits_list, false);
      setup_special_options(parsed_json, special_options_input);
      special_options_input.onchange = function() {
        effects_display.innerHTML = get_active_effects(parsed_json, papa_traits_list, mama_traits_list, special_options_input);
      }
      mama_traits_list.onchange = function() {
        effects_display.innerHTML = get_active_effects(parsed_json, papa_traits_list, mama_traits_list, special_options_input);
      }
      papa_traits_list.onchange = function() {
        effects_display.innerHTML = get_active_effects(parsed_json, papa_traits_list, mama_traits_list, special_options_input);
      }
    }
  };
  request.open("GET","fantasydog.json", true);
  request.send(); 



  </script>
</body>
</html>
