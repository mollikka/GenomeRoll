<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Breeding Simulator 2016</title>
  <script src="breeding.js"></script>
  <link rel="stylesheet" href="main.css">
</head>
<body>
  <h1>Breeding Simulator 2016</h1>
  <div id="status_display">Javascript is not running!</div>
  <div class="parent_field">
    <h2>Paternal settings</h2>
    <form id="dad_input">
    </form>
  </div>
  <div class="parent_field">
    <h2>Maternal settings</h2>
    <form id="mom_input">
    </form>
  </div>
  <div class="special_options">
    <h2>Breeding options</h2>
    <form id="special_options_input">
    </form>
  </div>
  <script>

  status_display.innerHTML = "Sending species data request."

  var request = new XMLHttpRequest();
  request.onreadystatechange = function() {
    if (request.readyState == 4 && request.status == 200) {
      var parsed_json = JSON.parse(request.responseText);
      setup_input(parsed_json, dad_input, true);
      setup_input(parsed_json, mom_input, false);
      setup_special_options(parsed_json, special_options_input);
      status_display.innerHTML = "Species data loaded!"
    }
    else if (request.readyState == 4) {
      status_display.innerHTML = "Species data error "+request.status;
    }
  };
  request.open("GET", "fantasydog.json", true);
  request.send();

  function setup_input(parsed_json, input_element, is_male) {
    setup_genome_input(parsed_json, input_element);
    setup_traitform(parsed_json, input_element, is_male);
    setup_build_input(parsed_json, input_element);
  }

  </script>
</body>
</html>
