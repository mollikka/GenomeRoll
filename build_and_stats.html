<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Breeding Simulator 2016</title>
  <script src="build.js"></script>
</head>
<body>
  <h1>STATUS WORKSHOP</h1>
    <h2>Paternal stats</h2>
    <form>
      <input id="dad_stats_input" type="text">
      <select id="dad_build_input"></select>
    </form>
    <ul id="dad_stats_output">
    </ul>
    <h2>Maternal stats</h2>
    <form>
      <input id="mom_stats_input" type="text">
      <select id="mom_build_input"></select>
    </form>
    <ul id="mom_stats_output">
    </ul>
    <h2>Pup stats</h2>
    <p>Possible builds:</p><div id="pup_build_output"></div>
    <form>
      <select id="kid_build_input"></select>
    </form>
    <ul id="kid_stats_output">
    </ul>
  <script>

  var request = new XMLHttpRequest();
  var checkboxes = [];
  request.onreadystatechange = function() {
    if (request.readyState == 4 && request.status == 200) {
      var parsed_json = JSON.parse(request.responseText);

      setup_build_input(parsed_json, dad_build_input);
      setup_build_input(parsed_json, mom_build_input);
      setup_build_input(parsed_json, kid_build_input);

      dad_build_input.oninput = function() {
        pup_build_output.innerHTML = get_pup_build_choices(parsed_json, dad_build_input.value, mom_build_input.value);
      }

      mom_build_input.oninput = function() {
        pup_build_output.innerHTML = get_pup_build_choices(parsed_json, dad_build_input.value, mom_build_input.value);
      }

      kid_build_input.oninput = function() {
        var dad_stats = parse_stats(parsed_json, dad_stats_input.value);
        var mom_stats = parse_stats(parsed_json, mom_stats_input.value);
        var kid_stats = calculate_pup_stats(parsed_json, dad_stats, mom_stats, kid_build_input.value);
        display_stats(parsed_json, kid_stats_output, kid_stats);
      }

      dad_stats_input.oninput = function() {
        var dad_stats = parse_stats(parsed_json, dad_stats_input.value);
        display_stats(parsed_json, dad_stats_output, dad_stats);
      }
      mom_stats_input.oninput = function() {
        var mom_stats = parse_stats(parsed_json, mom_stats_input.value);
        display_stats(parsed_json, mom_stats_output, mom_stats);
      }
    }
  };
  request.open("GET","build.json", true);
  request.send(); 



  </script>
</body>
</html>
