<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Breeding Simulator 2016</title>
  <script src="traits.js"></script>
</head>
<body>
  <h1>TRAIT LABORATORY</h1>
    <h2>Paternal traits</h2>
    <form id="papa_traits_input">
      <ul id="papa_traits_list">
      </ul>
    </form>
    <h2>Maternal traits</h2>
    <form id="mama_traits_input">
      <ul id="mama_traits_list">
      </ul>
    </form>
    <h2>Pup traits</h2>
      <h3>Male</h3>
      <ul id="pup_traits_list_boy">
      </ul>
      <h3>Female</h3>
      <ul id="pup_traits_list_girl">
      </ul>
  <script>

  var request = new XMLHttpRequest();
  var checkboxes = [];
  request.onreadystatechange = function() {
    if (request.readyState == 4 && request.status == 200) {
      var parsed_json = JSON.parse(request.responseText);

      setup_traitform(parsed_json, papa_traits_list, true);
      setup_traitform(parsed_json, mama_traits_list, false);

      papa_traits_input.onchange = function() {
        var both_parents_traits = get_input_traits();
        var dad_traits = both_parents_traits[0];
        var mom_traits = both_parents_traits[1];
        display_pup_traits(pup_traits_list_boy,(calculate_pup_traits(parsed_json, dad_traits, mom_traits, true)));
        display_pup_traits(pup_traits_list_girl,(calculate_pup_traits(parsed_json, dad_traits, mom_traits, false)));
      }

      mama_traits_input.onchange = function() {
        var both_parents_traits = get_input_traits();
        var dad_traits = both_parents_traits[0];
        var mom_traits = both_parents_traits[1];
        display_pup_traits(pup_traits_list_boy,(calculate_pup_traits(parsed_json, dad_traits, mom_traits, true)));
        display_pup_traits(pup_traits_list_girl,(calculate_pup_traits(parsed_json, dad_traits, mom_traits, false)));
      }
    }
  };
  request.open("GET","traits.json", true);
  request.send(); 



  </script>
</body>
</html>
